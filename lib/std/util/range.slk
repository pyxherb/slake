module std.util.range;

class Range<T>: @iter::BidirIterable<T> {
	@T begin, end;
	@T->(usize n) stepper;
	usize i;

	public operator new(@T begin, @T end, @T->(usize n) stepper) {
		this.begin = begin;
		this.end = end;
		this.stepper = stepper;
		i = 0;
	}

	public override @T next() {
		return stepper(++i);
	}

	public override @T last() {
		return stepper(--i);
	}

	public override @T cur() {
		return stepper(i);
	}

	public @T operator[](usize n) {
		return stepper(n);
	}
}
